# 🔧 トラブルシューティングガイド

月報作成支援ツールの問題解決ガイドです。よくある問題と解決方法をまとめています。

## 📋 目次
1. [起動時の問題](#起動時の問題)
2. [Docker関連の問題](#docker関連の問題)
3. [ブラウザ・アクセスの問題](#ブラウザアクセスの問題)
4. [データ・保存の問題](#データ保存の問題)
5. [パフォーマンスの問題](#パフォーマンスの問題)
6. [その他の問題](#その他の問題)

---

## 🚀 起動時の問題

### ❌ 「Dockerがインストールされていません」エラー

**解決方法：**
1. [Docker Desktop](https://www.docker.com/products/docker-desktop/)をダウンロード
2. インストール後、Docker Desktopを起動
3. クジラのアイコン🐳が表示されるまで待つ
4. 起動スクリプトを再実行

### ❌ 「Dockerが起動していません」エラー

**解決方法：**
- **Windows**: スタートメニューから「Docker Desktop」を起動
- **Mac**: アプリケーションから「Docker」を起動
- 起動には1-2分かかります

### ❌ 「管理者権限が必要です」エラー（Windows）

**解決方法：**
1. `docker-start.bat`を右クリック
2. 「管理者として実行」を選択

### ❌ 「開発元が未確認」エラー（Mac）

**解決方法：**
1. `docker-start.sh`を右クリック
2. 「開く」を選択
3. 警告ダイアログで「開く」をクリック

---

## 🐳 Docker関連の問題

### ❌ ポート3456/8000が既に使用されています

**解決方法1 - Docker Desktopで確認：**
1. Docker Desktopを開く
2. 左側の「Containers」をクリック
3. 実行中のコンテナを「Stop」

**解決方法2 - コマンドで停止：**
```bash
# Mac/Linux
docker ps
docker stop [CONTAINER_ID]

# Windows
docker ps
docker stop [CONTAINER_ID]
```

### ❌ メモリ不足エラー

**解決方法：**
1. Docker Desktop設定を開く（クジラアイコン🐳→Settings）
2. Resources → Advanced
3. Memoryを最低2GBに設定
4. 「Apply & Restart」をクリック

### ❌ ビルドが遅い・失敗する

**解決方法：**
1. ネットワーク接続を確認
2. VPNを一時的に切断
3. プロキシ設定を確認
4. 以下のコマンドでキャッシュをクリア：
```bash
docker system prune -a
```

---

## 🌐 ブラウザ・アクセスの問題

### ❌ ブラウザが自動で開かない

**解決方法：**
手動でブラウザを開いて以下にアクセス：
- http://localhost:3456

### ❌ 「このサイトにアクセスできません」エラー

**確認事項：**
1. アドレスが `http://localhost:3456`（httpであることに注意）
2. Docker Desktopが起動している
3. コンテナが実行中：
```bash
docker ps
```

### ❌ ページが真っ白になる

**解決方法：**
1. ブラウザのキャッシュをクリア（Ctrl+Shift+R または Cmd+Shift+R）
2. 別のブラウザで試す
3. シークレット/プライベートモードで試す

---

## 💾 データ・保存の問題

### ❌ データが消えた

**確認事項：**
- データは `./data`フォルダに保存されています
- コンテナを削除してもデータは残ります
- フォルダごと移動した場合はパスを確認

### ❌ PDFが生成されない

**解決方法：**
1. ブラウザのポップアップブロックを解除
2. 日本語フォントの問題の可能性
3. コンテナを再起動：
```bash
docker-compose -f docker-compose.prod.yml restart
```

### ❌ 「保存に失敗しました」エラー

**解決方法：**
1. ディスク容量を確認
2. `data`フォルダの権限を確認
3. コンテナのログを確認：
```bash
docker-compose -f docker-compose.prod.yml logs backend
```

---

## ⚡ パフォーマンスの問題

### ❌ 動作が遅い

**解決方法：**
1. Docker Desktopのメモリ割り当てを増やす
2. 他のDockerコンテナを停止
3. ブラウザのタブを減らす
4. PCを再起動

### ❌ CPU使用率が高い

**解決方法：**
1. Docker Desktop設定でCPU制限を調整
2. ビルドが完了するまで待つ（初回は重い）
3. アンチウイルスソフトの除外設定にDockerを追加

---

## 🔧 その他の問題

### ❌ 日本語が文字化けする

**解決方法：**
1. ブラウザのエンコーディングをUTF-8に設定
2. システムの言語設定を確認
3. コンテナを再ビルド：
```bash
docker-compose -f docker-compose.prod.yml build --no-cache
```

### ❌ ログインできない

**解決方法：**
1. ブラウザのCookieを有効にする
2. localStorageをクリア（開発者ツール→Application→Clear Storage）
3. 新しいアカウントを作成

### ❌ OpenAI API エラー

**確認事項：**
1. APIキーが正しく設定されているか
2. APIキーの利用制限・残高を確認
3. ネットワーク接続を確認

---

## 📞 それでも解決しない場合

### 情報収集
以下の情報を集めてサポートに連絡：

1. **エラーメッセージ**のスクリーンショット
2. **OS情報**（Windows 10/11、macOS バージョン）
3. **Docker Desktopのバージョン**
4. **ログ情報**：
```bash
docker-compose -f docker-compose.prod.yml logs > error_log.txt
```

### サポート連絡先
- コミュニティ管理者にご連絡ください
- 診断ツール（diagnose.sh）の結果を添付していただけると解決が早くなります

### よくあるQ&A

**Q: アンインストールしたい**
A: 
1. Docker Desktopでコンテナを削除
2. アプリのフォルダを削除
3. Docker Desktopをアンインストール（任意）

**Q: データのバックアップ方法は？**
A: `data`フォルダをコピーして保存

**Q: 複数人で使える？**
A: 各自のPCにインストールして使用してください

**Q: アップデート方法は？**
A: 
1. 最新版をダウンロード
2. `data`フォルダを新しいフォルダにコピー
3. 新しいバージョンを起動