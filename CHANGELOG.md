# Changelog

このファイルでは、月報作成支援ツールの重要な変更をすべて記録しています。

フォーマットは [Keep a Changelog](https://keepachangelog.com/ja/1.0.0/) に基づき、
[Semantic Versioning](https://semver.org/lang/ja/) に従ってバージョン管理を行っています。

## [Unreleased]

### 予定されている機能
- SQLiteからPostgreSQLへの移行機能
- 月報テンプレートのカスタマイズ機能
- チーム機能とレポート共有
- モバイルアプリ対応

## [1.0.8] - 2025-06-05

### 🚀 新機能・改善 (New Features & Improvements)
- **起動の安定性向上**: 既存コンテナの自動クリーンアップ機能を強化
  - Mac/Windows両方の起動スクリプトを改善
  - `monthly-report-*`と`app-*`形式の両方のコンテナパターンに対応
  - より確実なコンテナ削除処理を実装

### 🐛 バグ修正 (Bug Fixes)
- **ポート競合エラーの自動解決**: 手動でのDocker操作が不要に
  - 「ポート3456が使用中」エラーの自動対処
  - 既存コンテナの自動停止・削除
- **OpenAI API使用時のエラー修正**: AI月報生成が正常に動作
  - `unique_report_month`未定義エラーを修正
  - テストAPIエンドポイントの不足ファイルを追加

### 🔧 技術的改善 (Technical Improvements)
- バージョン番号を1.0.8に更新
- 起動スクリプトのエラーハンドリングを改善

## [1.0.7] - 2025-06-05

### 🎨 改善 (Improved)
- **配布パッケージの大幅簡素化**: エンドユーザー向けに最適化
  - ファイル数を38個から13個に削減（メインレベル）
  - ドキュメントを20個以上から3個に統合
  - ファイルサイズを345KB→296KBに軽量化
  - 開発者向けファイルを完全除去

### 📝 ドキュメント (Documentation)
- **README.txt刷新**: 3ステップで起動できるシンプルガイド
- **統合ガイド作成**: DETAILED_GUIDE.mdに初心者向け情報を集約
- **構造の明確化**: 必要最小限のファイルのみを含む構成

### 🚀 ユーザビリティ (Usability)
- **初心者向け最適化**: どこから始めればいいか一目瞭然
- **起動プロセス簡略化**: OS別の起動方法を明確に表示
- **トラブルシューティング改善**: 2つのドキュメントで全問題に対応

## [1.0.6] - 2025-06-05

### 🔧 修正 (Fixed)
- **月報重複制限を完全削除**: 同じ月の月報を複数作成できるように変更
  - `conversation_no_auth.py`から既存月報チェックを削除
  - `reports_no_auth.py`から既存月報チェックを削除
  - APIでも対話型でも制限なく月報作成が可能
- **収入計算ロジックの改善**: より正確で安全な収入計算を実装
  - 合計収入または最初の金額のみを使用するロジックに変更
  - デフォルト値を0円に設定し、未定義エラーを解消
  - 数値変換エラーの適切な処理を追加
- **月報タイトル形式の統一**: 全ての月報で一貫したタイトル形式を適用
  - 形式: `# 月報：YYYY年MM月`
  - AI生成・対話型・手動作成で統一
  - Notion互換性の向上

### 🚀 改善 (Improved)
- **起動安定性の向上**: Docker環境での動作がより確実に
- **エラーハンドリングの強化**: 未定義変数バグの修正
- **リリースフォルダの整合性向上**: release/フォルダ内のファイル同期

### 📝 ドキュメント (Documentation)
- README.md の大幅更新
  - v1.0.6の主要改善点を追加
  - システム要件とトラブルシューティングの充実
  - インストール手順の明確化
- DEPLOY.md の本格更新
  - 本番環境でのデプロイ手順を詳細化
  - 環境変数設定の包括的な説明
  - SSL/HTTPS設定とセキュリティガイド
  - PostgreSQL移行手順の追加

### 🔒 セキュリティ (Security)
- 本番環境でのセキュリティチェックリストを追加
- SECRET_KEY管理のベストプラクティス文書化
- CORS設定の適切な説明を追加

## [1.0.5] - 2025-06-04

### 🎨 改善 (Improved)
- **月報フォーマットを新形式に統一**: 7セクション構成とNotion互換性向上
- **AI月報生成時のローディング画面追加**: ユーザー体験の向上
- **対話型月報生成とAI機能の完全修復**: 安定性の大幅改善

### 🔧 修正 (Fixed)
- 月報生成の改善: ユーザーID統一とNotion向けフォーマット改善
- 起動エラーとファイル構成の大幅改善

## [1.0.4] - 2025-06-03

### 🔧 修正 (Fixed)
- **起動エラーの完全解決**: Dockerコンテナの安定動作を実現
- **ファイル構成の大幅改善**: プロジェクト構造の最適化
- **Mac起動問題の修正**: manual-start.commandの動作を改善

### 📝 ドキュメント (Documentation)
- README整合性改善
- GitHubリリース作成用のツールとガイド追加

## [1.0.3] - 2025-06-02

### 🚀 新機能 (Added)
- **配布版の大幅改善**: Dockerベースの確実な起動システム
- **Windowsバッチファイル追加**: ダブルクリック起動の実現
- **包括的な文書作成**: 
  - 超初心者向けガイド（BEGINNER_GUIDE.md）
  - 画面付きガイド（STEP_BY_STEP_SCREENSHOTS.md）
  - 小学生版ガイド（ELEMENTARY_README.md）
  - Cursor IDE用ガイド（CURSOR_USER_GUIDE.md）

### 🔧 修正 (Fixed)
- **ポート設定の不整合解消**: フロントエンドとバックエンドの連携修復
- **Docker環境の最適化**: より確実な起動プロセス

### 🔒 セキュリティ (Security)
- **個人データの完全削除**: クリーンリリース作成
- **セキュリティ設定の改善**: 本番環境向け設定の追加

## [1.0.2] - 2025-06-01

### 🎨 改善 (Improved)
- **UI/UXの改善**: より直感的なインターフェース
- **レスポンシブデザインの最適化**: モバイル・タブレット対応

### 🔧 修正 (Fixed)
- **データベース接続の安定化**: SQLite操作の最適化
- **PDF生成機能の改善**: フォーマットと品質の向上

## [1.0.1] - 2025-05-31

### 🔧 修正 (Fixed)
- **初回起動時のデータベース作成問題**: 自動テーブル作成の実装
- **フロントエンド・バックエンド通信エラー**: CORS設定の修正
- **AI機能の応答性改善**: OpenAI API呼び出しの最適化

### 📝 ドキュメント (Documentation)
- インストール手順の明確化
- トラブルシューティングガイドの追加

## [1.0.0] - 2025-05-30

### 🚀 初回リリース (Initial Release)

#### ✨ 主要機能
- **対話型月報作成**: ガイド付きステップバイステップ作成
- **AI支援月報生成**: OpenAI GPT-4による自動月報作成
- **美しいPDF出力**: プロフェッショナルなデザインの月報
- **データ分析機能**: 月次推移の可視化とグラフ表示
- **テンプレート機能**: 複数の月報フォーマット対応

#### 🛠️ 技術仕様
- **フロントエンド**: React 18 + TypeScript + Tailwind CSS
- **バックエンド**: Python FastAPI + SQLite
- **PDF生成**: ReportLab + Chart.js
- **AI機能**: OpenAI API (GPT-4)
- **認証**: JWT + セキュアセッション管理
- **デプロイ**: Docker + Docker Compose

#### 🎯 サポート機能
- **ユーザー認証**: セキュアなログイン・登録システム
- **データ永続化**: SQLiteによる確実なデータ保存
- **設定管理**: ユーザー個別の設定とAPIキー管理
- **エラーハンドリング**: 包括的なエラー処理と復旧機能

#### 📱 対応環境
- **OS**: Windows 10/11, macOS 10.15+, Ubuntu 18.04+
- **ブラウザ**: Chrome, Firefox, Safari, Edge (最新版)
- **要件**: Docker Desktop, 4GB RAM推奨

---

## 記号の説明

- 🚀 **新機能 (Added)**: 新しい機能の追加
- 🎨 **改善 (Changed)**: 既存機能の変更・改善
- 🔧 **修正 (Fixed)**: バグ修正
- 🗑️ **削除 (Removed)**: 機能・ファイルの削除
- 🔒 **セキュリティ (Security)**: セキュリティ関連の修正
- 📝 **ドキュメント (Documentation)**: ドキュメントの追加・改善
- ⚠️ **非推奨 (Deprecated)**: 今後削除予定の機能

---

**Semantic Versioning について:**
- **MAJOR** (1.x.x): 後方互換性のない変更
- **MINOR** (x.1.x): 後方互換性のある機能追加
- **PATCH** (x.x.1): 後方互換性のあるバグ修正

詳細は [セマンティックバージョニング](https://semver.org/lang/ja/) を参照してください。